import{_ as e,c as l,o as i,R as o}from"./chunks/framework.5dd80646.js";const m=JSON.parse('{"title":"虚拟DOM","description":"","frontmatter":{},"headers":[],"relativePath":"Vue/Diff算法与虚拟DOM.md"}'),a={name:"Vue/Diff算法与虚拟DOM.md"},d=o('<h1 id="虚拟dom" tabindex="-1">虚拟DOM <a class="header-anchor" href="#虚拟dom" aria-label="Permalink to &quot;虚拟DOM&quot;">​</a></h1><h3 id="优点" tabindex="-1">优点 <a class="header-anchor" href="#优点" aria-label="Permalink to &quot;优点&quot;">​</a></h3><ol><li>减少 DOM 操作</li></ol><ul><li>多次 DOM 操作合并为一次；</li><li>可以借助 diff算法将该多余的操作省略；</li></ul><ol start="2"><li>跨平台</li></ol><ul><li>不仅可以变成 DOM，还可以变成小程序、安卓应用；</li><li>因为虚拟 DOM 本质上是一个对象</li></ul><h3 id="缺点" tabindex="-1">缺点 <a class="header-anchor" href="#缺点" aria-label="Permalink to &quot;缺点&quot;">​</a></h3><p>需要额外的创建函数来创建</p><ul><li>Vue 中为 <code>render</code> 函数中的 <code>h</code> 函数；一般在 template 标签中写，通过 <code>vue-loader</code> 转译；</li><li>React 中为 <code>createElement</code> 函数，一般通过 JSX 语法 return 出去，通过 babel 直接转译</li><li>严重依赖打包工具，需要构建过程进行转译语法。</li></ul><h1 id="dom-diff算法" tabindex="-1">DOM diff算法 <a class="header-anchor" href="#dom-diff算法" aria-label="Permalink to &quot;DOM diff算法&quot;">​</a></h1><ul><li>就是一个函数，称之为 <code>patch</code></li><li><code>patches = patch(oldVNode, newVNode)</code></li><li><code>patches</code> 就是要运行的 DOM 操作</li></ul><h3 id="大概逻辑" tabindex="-1">大概逻辑 <a class="header-anchor" href="#大概逻辑" aria-label="Permalink to &quot;大概逻辑&quot;">​</a></h3><ul><li>Tree diff</li></ul><ol><li>新旧对比，找出哪些节点需要更新</li><li>如果节点是组件就看 <code>Component diff</code></li><li>如果节点是标签就看 <code>Element diff</code></li></ol><ul><li>Component diff</li></ul><ol><li>类型不同就直接替换（删除旧的）</li><li>类型相同则只更新属性</li><li>然后深入组件做 <code>Tree diff</code>（递归）</li></ol><ul><li>Element diff</li></ul><ol><li>标签名不同直接替换，相同则只更新属性</li><li>然后进入标签后代做 <code>Tree diff</code>（递归）</li></ol><h3 id="dom-diff缺点" tabindex="-1">DOM diff缺点 <a class="header-anchor" href="#dom-diff缺点" aria-label="Permalink to &quot;DOM diff缺点&quot;">​</a></h3><p>只能一个一个节点对比，不能全局对比，严重依赖唯一的 <code>key</code> 值作为每个相同节点的 <code>id</code></p>',20),t=[d];function c(r,f,n,h,s,u){return i(),l("div",null,t)}const p=e(a,[["render",c]]);export{m as __pageData,p as default};
